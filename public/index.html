<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>OASIS Chat – Spidey Style</title>
<style>
body {
  margin: 0;
  font-family: 'Orbitron', sans-serif;
  color: #fff;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100vh;
  position: relative;
  overflow: hidden;
}

/* Overlay for fading backgrounds */
body::before {
  content: '';
  position: absolute;
  top:0; left:0; right:0; bottom:0;
  background-size: cover;
  background-position: center;
  z-index: -1;
  opacity: 1;
  transition: opacity 1.5s ease-in-out;
}

#messages { /* unchanged */ ... }
#messages li { /* unchanged */ ... }
#form { /* unchanged */ ... }
#input { /* unchanged */ ... }
#send { /* unchanged */ ... }
#send:hover { /* unchanged */ ... }
@keyframes webSling { /* unchanged */ ... }
</style>

<script>
const backgrounds = [
  "url('https://spidyradioon.is-great.net/images/guardians.jpg')",
  "url('https://spidyradioon.is-great.net/images/xmenw.jpg')",
  "url('https://spidyradioon.is-great.net/images/jl.jpg')",
  "url('https://spidyradioon.is-great.net/images/spiderman1.jpg')"
];

let current = 0;
const body = document.body;

// Initial background
body.style.setProperty('--bg-url', backgrounds[current]);
body.style.backgroundImage = backgrounds[current];
body.style.opacity = 1;

// Function to fade background
function changeBackground() {
  const next = (current + 1) % backgrounds.length;
  
  // Create a temporary overlay div for fade
  const overlay = document.createElement('div');
  overlay.style.position = 'absolute';
  overlay.style.top = 0;
  overlay.style.left = 0;
  overlay.style.right = 0;
  overlay.style.bottom = 0;
  overlay.style.backgroundImage = backgrounds[next];
  overlay.style.backgroundSize = 'cover';
  overlay.style.backgroundPosition = 'center';
  overlay.style.opacity = 0;
  overlay.style.transition = 'opacity 1.5s ease-in-out';
  overlay.style.zIndex = -2;
  document.body.appendChild(overlay);

  // Trigger fade
  requestAnimationFrame(() => {
    overlay.style.opacity = 1;
  });

  // After fade, remove old overlay
  setTimeout(() => {
    document.body.style.backgroundImage = backgrounds[next];
    document.body.removeChild(overlay);
    current = next;
  }, 1500);
}

// Change every 8 seconds
setInterval(changeBackground, 8000);
</script>


</head>
<body>
  <ul id="messages"></ul>
  <form id="form">
    <input id="input" autocomplete="off" placeholder="Shoot your message!" />
    <button id="send">Send</button>
  </form>

  <script src="/socket.io/socket.io.js"></script>
  <script>
    const socket = io();
    const form = document.getElementById('form');
    const input = document.getElementById('input');
    const messages = document.getElementById('messages');

    socket.on('chat message', function(msg) {
      const li = document.createElement('li');
      li.textContent = msg;
      messages.appendChild(li);
      messages.scrollTop = messages.scrollHeight;
    });

    form.addEventListener('submit', function(e) {
      e.preventDefault();
      if (input.value) {
        socket.emit('chat message', input.value);
        input.value = '';
      }
    });
  </script>
</body>
</html>
